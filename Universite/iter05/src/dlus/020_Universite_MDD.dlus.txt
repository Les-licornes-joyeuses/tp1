/*
-- =========================================================================== A
Produit : CoFELI.Exemple.Universite
Variante : 2021.iter04
Artefact : Universite_MDD.dlus.txt
Responsable : Luc.Lavoie@USherbrooke.ca
Version : 0.1.0c (2021-03-23)
Statut : travail en cours
Encodage : UTF-8, sans BOM; fin de ligne simple (LF)
Plateformes : S. O.
-- =========================================================================== A
*/

/*
-- =========================================================================== B

== But

Illustrer la construction d‚Äôun sch√©ma relationnel simple selon les r√®gles de l‚Äôart.

== Probl√®me

Mod√©liser les entit√©s et les op√©rations r√©put√©es utiles √† la gestion des
inscriptions √©tudiantes universitaires.

== √âtape 03

D√©finition des types.

-- =========================================================================== B
*/

--
--  D√©finir le sch√©ma principal de la base de donn√©es Universite (MDD).
--  L‚Äôinterface est d√©finie et programm√©e par ailleurs (voir fichiers
--  Universite_IMM_base.def.dlus.txt et Universite_IMM_base.pro.dlus.txt).
--  Les autorisations d‚Äôacc√®s sont faites par ailleurs (voir fichier Universite_MDD.acc.dlus.txt).
--
creer schema Universite.MDD ;

definir schema Universite.MDD :

importer Universite.IMM_base ;

var √âtudiant {matriculeE : MatriculeE, nom : Nom, ddn : Date}
  pred ¬´ L‚Äô√©tudiant (identifi√© par le matricule "matriculeE") a pour nom "nom" et est n√© le "ddn". ¬ª
  df matriculeE -> nom
  df matriculeE -> ddn
  cle {matriculeE}

var Professeur {matriculeP : Matricule, nom : Nom}
  pred ¬´ Le professeur (identifi√© par le matricule "matriculeP") a pour nom "nom". ¬ª
  df matriculeP -> nom
  cle {matriculeP}

var Professeur_Bureau_PRE {matriculeP : Matricule, bureau : Bureau}
  pred ¬´ Le professeur (identifi√© par le matricule "matriculeP") a pour bureau "bureau". ¬ª
  df matriculeP -> bureau
  cle {matriculeP}
  ref {matriculeP} -> Professeur

var Professeur_Bureau_ABS {matriculeP : Matricule, cause : Cause}
  pred ¬´ Le professeur (identifi√© par le matricule "matriculeP") n'a pas de bureau
         pour la raison "cause". ¬ª
  df matriculeP -> cause
  cle {matriculeP}
  ref {matriculeP} -> Professeur

inv Professeur_Bureau_INV
  pred ¬´ Tout professeur a soit un bureau soit une raison pour laquelle il n‚Äôen a pas. ¬ª
  Professeur ùûπ {matriculeP} =
    ((Professeur_Bureau_ABS ùûπ {matriculeP})
      UnionD (Professeur_Bureau_PRE ùûπ {matriculeP})

var Cours {sigle : Sigle, titre : Titre, cr√©dit: CDC}
  pred ¬´ Le cours (identifi√© par le sigle "sigle") a pour titre "titre" et
         comporte "credit" cr√©dit(s). ¬ª
  df sigle -> titre
  df sigle -> cr√©dit
  cle {sigle}

var Offre {sigle : Sigle, trimestre : Trimestre}
  pred ¬´ L‚ÄôUniversit√© s‚Äôengage √† offrir le cours "sigle" au trimestre "trimestre". ¬ª
  -- correspond √† l‚Äôoffre planifi√©e
  cle {sigle, trimestre}
  ref {sigle} -> Cours

var Groupe {sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe}
  pred ¬´ Le groupe (identifi√© par le sigle "sigle" et le num√©ro "noGroupe"
         au sein du trimestre "trimestre") est constitu√©. ¬ª
  cle {sigle, trimestre, noGroupe}
  ref {sigle} -> Cours

var Affectation {sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe, matriculeP : MatriculeP}
  pred ¬´ Le professeur "matriculeP" assure la formation du groupe identifi√© par
         sigle "sigle", le num√©ro "noGroupe" et le trimestre "trimestre". ¬ª
  -- Pour permettre √† un groupe de professeurs d‚Äôassurer la formation, il faudrait
  -- ajouter matriculeP √† la cl√© candidate.
  cle {sigle, trimestre, noGroupe}
  ref {sigle, trimestre, noGroupe} -> Groupe
  ref {matriculeP} -> Professeur

var Inscription {matriculeE : MatriculeE, sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe)
  pred ¬´ L‚Äô√©tudiant "matriculeE" est inscrit au groupe identifi√© par
         sigle "sigle", le num√©ro "noGroupe" et le trimestre "trimestre". ¬ª
  cle {matriculeE, sigle, trimestre, noGroupe}
  ref {sigle, trimestre, noGroupe} -> Groupe

var √âvaluation {matriculeE : MatriculeE, sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe, note : Note)
  pred ¬´ L‚Äô√©tudiant "matriculeE" inscrit au groupe identifi√© par
         sigle "sigle", le num√©ro "noGroupe" et le trimestre "trimestre"
         a obtenu la note "note". ¬ª
  df sigle, trimestre, noGroupe, matriculeE -> note
  cle {matriculeE, sigle, trimestre, noGroupe}
  ref {sigle, trimestre, noGroupe, matriculeE} -> Inscription

var Pr√©alable {sigle, siglePr√©alable}
  pred ¬´ L‚Äôinscription au cours "sigle" n‚Äôest autoris√©e qu‚Äôaux √©tudiants qui auront r√©ussi
         le cours "siglePr√©alable" avant le d√©but du cours "sigle". ¬ª
  cle {sigle, siglePr√©alable}
  ref {sigle} -> Cours
  ref {siglePralable -> sigle} -> Cours

var Comp√©tence {sigle : Sigle, matriculeP : MatriculeP}
  pred ¬´ Le professeur "matriculeP" est comp√©tent pour enseigner le cours "sigle". ¬ª
  cle {sigle, matriculeP}
  ref {sigle} -> Cours
  ref {matriculeP} -> Professeur

var Disponibilit√© {trimestre : Trimestre, matriculeP : MatriculeP}
  pred ¬´ Le professeur "matriculeP" est disponible pour enseigner au trimestre "trimestre". ¬ª
  cle {trimestre, matriculeP}
  ref {matriculeP} -> Professeur

inv Affectation_comp
  pred ¬´ Affectation est conforme √† Comp√©tence. ¬ª
  Affectation ùûπ {sigle, matricleP} ‚äÜ Comp√©tence

inv Affectation_disp
  pred ¬´ Affectation est conforme √† Disponibilit√©. ¬ª
  Affectation ùûπ {trimestre, matriculeP} ‚äÜ Disponibilit√©

--  Terminer la d√©finition et fermer la port√©e ouverte
fin Universite.MDD ;

/*
-- =========================================================================== Z

== Contributeurs
  (CK) Christina.Khnaisser@USherbrooke.ca,
  (LL) Luc.Lavoie@USherbrooke.ca

== Adresse, droits d‚Äôauteur et copyright
  Groupe Œú·øÜœÑŒπœÇ (M√©tis)
  D√©partement d‚Äôinformatique
  Facult√© des sciences
  Universit√© de Sherbrooke
  Sherbrooke (Qu√©bec)  J1K 2R1
  Canada
  http://info.usherbrooke.ca/llavoie/
  [CC-BY-NC-4.0 (http://creativecommons.org/licenses/by-nc/4.0)]

== T√¢ches projet√©es
  TODO 2021-03-02 (LL) : R√©aliser les √©tapes subs√©quentes
  * Affinement des types Cause (d‚Äôabsence), Sigle (de cours)  et Trimestre
    - Illustration des tables de code.
    - Illustration des dangers des attributs composites, en particulier en regard des cl√©s.
  * Affinement du concept de trimestre.
    - Illustration de l‚Äôexplicitation des attributs afin d‚Äô√©viter les ¬´ constantes cach√©es ¬ª.
    - Retour sur la validation et introudction d'une table de trimestres valides.
  * Division en sch√©mas.
    - Gestion de la complexit√© et du couplage par la visibilit√©.
    - Gestion de l‚Äôint√©grit√© et de la s√©curit√© par le contr√¥le d‚Äôacc√®s.

== T√¢ches r√©alis√©es
  2021-03-23 (LL) :
  * La contrainte ¬´ref {sigle} -> Cours¬ª est erron√©e dans la d√©finition de Disponibilit√©,
    elle a √©t√© retir√©e. Cela soul√®ve toutefois la question de la validation des trimestres.
    √Ä discuter.
  2021-03-02 (LL) : R√©alisation de l‚Äô√©tape 03
  * D√©finition des types √† partir du dictionnaire de donn√©es.
    - Illustration du bon usage des contraintes de type.
  2021-02-25 (LL) : R√©alisation de l‚Äô√©tape 02
  * Traitement explicite de l‚Äôoffre de cours (programm√©e et effective).
    - Illustration du traitement de la 5FN.
  2021-02-23 (LL) : R√©alisation de l‚Äô√©tape e01.
  * Prise en compte de l‚Äôabsence potentielle de certaines valeurs.
    - Illustration du traitement de l‚Äôannulabilit√© :
      * cas non applicable (note lors de l‚Äôinscription) ;
      * cas non disponible (bureau du professeur) ;
      * par DPJ ;
      * par DRU.
  2021-02-18 (LL) : R√©alisation de l‚Äô√©tape e00.
  * Prise en compte des entit√©s de base √âtudiant, Professeur, Cours, Groupe...
    - Illustration de la construction par entit√© et d√©pendances fonctionnelles.
  2021-02-15 (LL) : Cr√©ation initiale inspir√©e de l‚Äôexemple d√©velopp√© en 2014.

== R√©f√©rences
[ddv] http://info.usherbrooke.ca/llavoie/enseignement/Exemples/Universite/
      Universite_DDV.pdf
[std] http://info.usherbrooke.ca/llavoie/enseignement/Modules/
      BD190-STD-SQL-01_NDC.pdf

-- =========================================================================== Z
*/
